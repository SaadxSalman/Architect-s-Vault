<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instant Transformers | Translator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center p-6">

    <div class="max-w-2xl w-full bg-slate-800 rounded-2xl shadow-2xl p-8 border border-slate-700">
        <h1 class="text-3xl font-bold mb-2 bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent">
            Instant Multi-Translator
        </h1>
        <p class="text-slate-400 mb-8 text-sm">Powered by Llama 3.2 Reasoning</p>

        <div class="space-y-4">
            <textarea id="inputText" rows="4" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 focus:ring-2 focus:ring-blue-500 outline-none transition" placeholder="Enter text to translate..."></textarea>
            
            <div class="flex gap-4">
                <select id="targetLang" class="flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 outline-none">
                    <option value="Spanish">Spanish</option>
                    <option value="French">French</option>
                    <option value="German">German</option>
                    <option value="Urdu">Urdu</option>
                    <option value="Japanese">Japanese</option>
                </select>
                <button onclick="translateText()" id="btn" class="flex-1 bg-blue-600 hover:bg-blue-500 font-bold py-2 rounded-xl transition">
                    Translate ✨
                </button>
            </div>

            <div id="resultBox" class="hidden mt-8 space-y-4 animate-in fade-in duration-500">
                <div class="p-4 bg-slate-900 border-l-4 border-emerald-500 rounded-r-xl">
                    <p class="text-xs text-emerald-400 font-bold uppercase tracking-wider">Detected: <span id="detectedLang"></span></p>
                    <p id="outputText" class="text-lg mt-1"></p>
                </div>
                <div class="p-4 bg-slate-700/30 rounded-xl">
                    <p class="text-xs text-slate-500 font-bold uppercase">Reasoning</p>
                    <p id="reasoningText" class="text-sm italic text-slate-400"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function translateText() {
            const text = document.getElementById('inputText').value;
            const targetLang = document.getElementById('targetLang').value;
            const btn = document.getElementById('btn');
            
            if(!text) return alert("Please enter text");

            btn.innerText = "Processing...";
            btn.disabled = true;

            try {
                const res = await fetch('/api/translate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text, targetLang })
                });
                
                const data = await res.json();
                
                document.getElementById('resultBox').classList.remove('hidden');
                document.getElementById('detectedLang').innerText = data.detected;
                document.getElementById('outputText').innerText = data.translation;
                document.getElementById('reasoningText').innerText = data.reasoning;
            } catch (err) {
                alert("Error connecting to backend");
            } finally {
                btn.innerText = "Translate ✨";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>